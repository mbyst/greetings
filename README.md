# Greeting Service for a new breakthrough social network

This project is an implementation of a sample Greeting Service, which demonstrates various aspects of Java backend programming.

**Design decisions**
- There is just one resource for both business operations, because there is minimal difference in functionality
- Requests take query paramaters and are performed as HTTP GET method. This is a better RESTful design in this case when compared to POST requests with parameters in a JSON body, because the resource is read-only and performs no changes on the server (and the results can be cached by proxy servers). POST may generally signify some changes in the server and/or may be needed in case of complex, structured inputs for requests.
- There is an abstraction of DailyGreetingsService and its concrete implementation PoliteDailyGreetings is instatiantioned using Spring dependency injection mechanisms. The design allows the application to be extended in the future with posible other imlementations e.g. for children with random, funny greetings.
- There are two types of system messages: messages returned to the client are stored in a ResourceBundle (which allows locale support) and messages only logged are used directly as strings within the code with SLF4J template features
- There are two types of tests: unit tests for PoliteDailyGreetingService and integration tests, which test alltogether also the REST controller, bad requests etc.
- Greetings messages are stored in files as Properties with locale tag suffix in the bundle name. Resource bundles were not used in this case, because the IETF locale tags used by the clients are different from ISO tags used by Java ResurceBundle. Also fallback mechanism is not desired according to business requirements.
- Locale support can be extended either at design-time or also later when starting the application by adding custom localized files with greetings to the classpath. The classpath is scanned automatically and each file with greetings messages is also checked for consistency (mandatory general greeting). If one of the locales is inconsistent/invalid, it will not stop the application from opration (unless there is no valid locale).

**Prerequisites**
-
- maven 3.5.3 or later
- jdk11
- executables of maven and java on a system/user path
- curl or similar http client for testing

**Build**
-
`mvn package`

**Run**
-
change diractory to target folder generated by maven and run:

`java -jar greetings-0.0.1-SNAPSHOT.jar`

**Usage**
-
- To test general greeting

    execute `curl 'http://localhost:8080/greetings/daily/greeting?locale=en-GB'`

    to get a sample JSON response: `{"greeting":"Hello"}`

- To test time-specific greeting

    execute `curl 'http://localhost:8080/greetings/daily/greeting?locale=en-GB&time=18:32'`

    to get a sample response: `{"greeting":"Good evening"}`

- In case of error the system generates a JSON response with details e.g.:

`    {"timestamp":"2021-02-07T22:36:13.246+00:00","status":400,"error":"Bad Request","message":"Locale not supported: de-DE","path":"/greetings/daily/greeting"}`

**Locales**
-
The application supports `cz-CS`, `en-US`, `en-GB` and `es` locales, which are built in. In case of need these can be extended by adding a custom locale bundle to the classpath (properties files packaged in a jar) and specifying the bundle name using Java system property `-DgreetingsBunde=mybundle`. See `src/main/resources` for example localization files.
